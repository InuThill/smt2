#summary This an introductory page for describing the new smt2 version
#labels Featured

= Requirements =

Your Web server needs a *MySQL 5* database and *PHP 5* installed with the libraries *cURL* and *json*. These settings are very common on most Web servers. If you don't know if your server has these requirements, you will be adviced when installing the system.


= Download =

Downloads are available in a ZIP file either from the [http://smt.speedzinemedia.com/smt/downloads.php (smt) website] or the [http://code.google.com/p/smt2/downloads/list Project Downloads page].

You may grab two zipped files:
 # The production version, ready for using on your webserver (~200 Kb).
 # The sources and API documentation (~350 Kb).

You can also download all the project (production, sources, documentation, etc.) from the [http://code.google.com/p/smt2/downloads/list Google code SVN].

= Installing =

The installation process is very similar to the well-known WordPress Content Management System (CMS), so the learning curve is supposed to be very soft.

It is recommended to put the system in a directory named `/smt2` on your localhost or production server.

== Steps ==

First of all, you must configure the basic stuff by editing the file `config.php`. Then, just upload the `smt2` folder to your Web server.

Assuming that you've uploaded the files to a server called `mysite.com`:

 # Open your Web browser and navigate to the URL `http://mysite.com/smt2/admin/sys/install.php`.
 # Enter your email and click the `Install` button. That email will be used to send you a new root password if you lose/forget it.
 # Once the installation process finishes, copy the generated password and log in (your username is *root*) to the CMS. You can change that password on the _users_ section.

=== Upgrading ===

If you already have version 2.0.0 installed, you can overwrite such installation with the new 2.0.1 files and then upgrade your database info by navigating to the URL `http://mysite.com/smt2/admin/sys/upgrade.php`.


= Uninstalling =

Just go to the URL `http://mysite.com/smt2/admin/sys/uninstall.php` and follow the instructions.


= Including the record script on your page(s) =

You must add the following 2 lines either to the HEAD or the BODY sections of each document that you wish to track:
{{{
<script type="text/javascript" src="/smt2/core/js/smt-aux.min.js"></script>  
<script type="text/javascript" src="/smt2/core/js/smt-record.min.js"></script>
}}}
Note that order is mandatory: aux functions first.


= Customizing the recording options =

These are the *default* (smt)^2^ recording options that you can change:
{{{
// Tracking frequency, in frames per second.      
fps: 24, 	
// Tracking timeout, in seconds.
recTime: 120, 
// Interval to send data, in seconds
postInterval: 2,
// Path to smt2 installation. The record script will try to find it automatically.
dirPath: "/smt2", 
// You may choose to advice users (or not) that their mouse activity is going to be logged. 
warn: false, 
// Text to display when advising users (if warn is set to true).
warnText: "We'd like to track your mouse activity\nin order to improve this website's usability.\nDo you agree?", 
// Cookies lifetime (in days) to reset both first time users and agreed-to-track visitors
cookieDays: 365,
// Random user selection. Setting it to false (or 0) means that all the population will be tracked.      
disabled: 0 //Math.round(Math.random()) // <-- random sampling is recommended!
}}}

To override these defaults you do not need to edit manually the record script. 

== version 2.0.0 ==
Create an object named `smtRecordingOptions` with the properties that you want to customize BEFORE the above mentioned 2 JavaScript lines. Take this example page:
{{{
<html>

<head>

  <title>My document title</title>

  <script type="text/javascript">
  var smtRecordingOptions = { 
   recTime: 300,
   disabled: Math.round(Math.random()),
   warn:true, 
   warnText: "We are going to record your mouse movements for a remote usability study."
  };
  </script>

  <script type="text/javascript" src="/smt2/core/js/smt-aux.min.js"></script>  
  <script type="text/javascript" src="/smt2/core/js/smt-record.min.js"></script>

</head>

<body>
Your page content goes here...
</body>

</html>
}}}

Here we are telling that the record script will live for 300 seconds, and users will be selected randomly -- It seems that people want to track all their visits by default, so random sampling was removed on version 2.0.0. Additionally, the system will advice users with a custom message (they must agree to get recorded their mouse activity).

Note that the last property have no ending comma.

== version 2.0.1 ==

Now you must call the `record` method explicitly.
This is how to invoke it, based on the previous example:
{{{
<html>

<head>

  <title>My document title</title>

  <script type="text/javascript" src="/smt2/core/js/smt-aux.min.js"></script>  
  <script type="text/javascript" src="/smt2/core/js/smt-record.min.js"></script>
  <script type="text/javascript">
  try {
    smt2.record({
      recTime: 300,
      disabled: Math.round(Math.random()),
      warn:true, 
      warnText: "We are going to record your mouse movements for a remote usability study."
    });
  } catch(err) {}
  </script>

</head>

<body>
Your page content goes here...
</body>

</html>
}}}

= A note about privacy =

It is up to the webmaster enabling the `warn` property on `smt-record.js` script; however on some countries anyone who employs this type of user tracking should always inform the user about it. Furthermore, tracking of user actions should only happen for a limited amount of time. 

If you decide to warn users, a confirm dialog will prompt *before* the webpage is rendered to the browser. You can write your own code to display a fancy modal window (or DIV) instead, as [http://smt.speedzinemedia.com/smt/comments.php#comment4976 this webmaster] did on his site. This is a good visual improvement, but unfortunately displaying a customized layered dialog instead of smt2's "ugly" javascript prompt will result in non-accurate users' metrics; e.g.: browsing time will be higher, mouse activity will be lower... and so on. 

*If you are using version 2.0.0*, a better approach would be start recording the mouse activity and notify in some DIV on the page that she is being recorded -- i.e.: by not involving any awaiting prompt/dialog. In this way, if the user don't want to be considered in the tracking study, she could disable the recording script by simply clicking on a link that removes this user from database.

*If you are using version 2.0.1*, you can tweak the initialization, as now the tracking script is called explicitly via JavaScript.


= Recording issues? =

Please take into account this checklist before reporting a new bug about _empty log cache_ or something similar:

 *  Server permissions. This may be the source of most of your problems. Concerning the _cache folder empty_ bug, take into account that the PHP process must have full read/write access in the `/admin/cache` dir. Setting dir permissions to 755 is enough, although you can try wider access, such as 775 or even 777.
 * No firewall is blocking connections. Just loose your firewalls rules for smt2.
 * The root user is never tracked. Try to access your site from another browser or computer.


= Working with the gathered data =

All recorded user visits can be managed on the _tracking report_ section of the CMS. The system will use the SWF visualization tool, if Flash plugin is available. Otherwise the JavaScript visualization API will be used.

Read more about the CMS on the [http://code.google.com/p/smt2/wiki/CMS wiki page].

== Visualization Layers ==

|| *layer name* || *meaning* ||
|| background overlay || layer for separating page and tracking ||
|| interacted areas || zones where the mouse passed ||
|| mouse path || the path the mouse followed ||
|| coordinates || tracked registration points ||
|| hesitations || mouse stop zones (dwell times) ||
|| drag&drop/selections || clicks without releasing the button ||
|| clicks || mouse clicks ||
|| direction & distances || computed mouse distances between registration points ||
|| active areas || custering of mouse coordinates ||
|| path centroid || geometric center of mouse coordinates ||
|| mouse pointers || entry, exit, wait and normal mouse cursors ||